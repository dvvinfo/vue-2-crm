"use strict";(self["webpackChunkvue_2_crm"]=self["webpackChunkvue_2_crm"]||[]).push([[77],{3077:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-title"},[t("h3",[e._v(e._s(e._f("localize")("Menu_Planning")))]),t("h4",[e._v(e._s(e._f("currency")(e.info.bill,"RUB")))])]),e.loading?t("loader-component"):e.categories.length?t("section",e._l(e.categories,(function(s){return t("div",{key:s.id},[t("p",[t("strong",[e._v(e._s(s.title)+":")]),e._v(" "+e._s(e._f("currency")(s.spend))+" "+e._s(e._f("localize")("From"))+" "+e._s(e._f("currency")(s.limit))+" ")]),t("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.tooltip,expression:"cat.tooltip"}],staticClass:"progress"},[t("div",{staticClass:"determinate",class:[s.progressColor],style:{width:s.progressPercent+"%"}})])])})),0):t("p",{staticClass:"center"},[e._v(" "+e._s(e._f("localize")("Message_There_are_no_categories_yet"))+" "),t("router-link",{attrs:{to:"/categories"}},[e._v(e._s(e._f("localize")("Add_new_category")))])],1)],1)},o=[],r=s(3822),n=s(379),a={name:"PlanningView",metaInfo(){return{title:this.$title("Menu_Planning")}},data:()=>({loading:!0,categories:[]}),computed:{...(0,r.Se)(["info"])},async mounted(){const e=await this.$store.dispatch("fetchRecords"),t=await this.$store.dispatch("fetchCategories");this.categories=t.map((t=>{const s=e.filter((e=>e.categoryID===t.id)).filter((e=>"outcome"===e.type)).reduce(((e,t)=>e+ +t.amount),0),i=100*s/t.limit,o=i>100?100:i,r=i<60?"green":i<100?"yellow":"red",a=t.limit-s,l=`${a<0?"Превышение на":"Осталось"} ${(0,n.Z)(Math.abs(a))}`;return console.log(s),{...t,progressPercent:o,progressColor:r,spend:s,tooltip:l}})),this.loading=!1}},l=a,c=s(1001),_=(0,c.Z)(l,i,o,!1,null,null,null),u=_.exports}}]);
//# sourceMappingURL=77.21735797.js.map